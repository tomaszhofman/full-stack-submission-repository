{"version":3,"sources":["components/Filter.js","components/Form.js","components/Person.js","components/Persons.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Filter","props","onSubmit","handleSearch","onChange","e","setNewSearch","target","value","newSearch","Form","handleNewPerson","setNewName","newName","setNewNumber","newNumber","type","Person","name","number","onClick","Persons","contactsToShow","map","person","handleDeletePerson","id","baseUrl","axios","get","then","response","data","newObject","post","put","delete","Notification","message","console","log","style","includes","color","background","border","padding","App","useState","persons","setPersons","filter","setFilter","sucessMessage","setSucessMessage","errorMessage","setErrorMessage","useEffect","servicePerson","initialNotes","toLowerCase","preventDefault","newPersonObject","checkIfNameExists","length","window","confirm","findPerson","newPersonNumber","returnedNote","catch","error","setTimeout","concat","personName","find","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.cad5368b.chunk.js","sourcesContent":["import React from 'react';\n\nconst Filter = (props) => {\n  return (\n    <form onSubmit={props.handleSearch}>\n      <div>\n        filter shown with:\n        <input\n          onChange={(e) => props.setNewSearch(e.target.value)}\n          value={props.newSearch}\n        />\n      </div>\n    </form>\n  );\n};\n\nexport default Filter;\n","import React from 'react';\n\nconst Form = (props) => {\n  return (\n    <form onSubmit={props.handleNewPerson}>\n      <div>\n        name:\n        <input onChange={props.setNewName} value={props.newName} />\n      </div>\n      <div>\n        number:\n        <input onChange={props.setNewNumber} value={props.newNumber} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default Form;\n","import React from 'react';\n\nconst Person = ({ name, number, onClick }) => {\n  return (\n    <li key={name}>\n      {name} {number} <button onClick={onClick}>delete</button>\n    </li>\n  );\n};\n\nexport default Person;\n","import React from 'react';\nimport Person from './Person';\n\nconst Persons = (props) => {\n  return (\n    <ul>\n      {props.contactsToShow.map((person) => (\n        <Person\n          onClick={() => props.handleDeletePerson(person.id)}\n          key={person.name}\n          {...person}\n        />\n      ))}\n    </ul>\n  );\n};\n\nexport default Persons;\n","import axios from 'axios';\nconst baseUrl = '/api/persons';\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => response.data);\n};\n\nconst create = (newObject) => {\n  const request = axios.post(baseUrl, newObject);\n  return request.then((response) => response.data);\n};\n\nconst deletePerson = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then((response) => response.data);\n};\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\n  return request.then((response) => response.data);\n};\n\nexport default { getAll, create, update, deletePerson };\n","import React from 'react';\n\nconst Notification = ({ message }) => {\n  const error = {\n    color: 'red',\n    background: 'lightgrey',\n    border: '3px solid red',\n    padding: '3px 10px',\n  };\n\n  const sucess = {\n    color: 'green',\n    background: 'lightgrey',\n    border: '3px solid green',\n    padding: '3px 10px',\n  };\n  console.log(message);\n  if (message === null) return null;\n  return <div style={message.includes('Add') ? sucess : error}>{message}</div>;\n};\n\nexport default Notification;\n","import React, { useState, useEffect } from 'react';\nimport Filter from './components/Filter';\nimport Form from './components/Form';\nimport Persons from './components/Persons';\nimport axios from 'axios';\n\nimport servicePerson from './services/persons';\nimport Notification from './components/Notification';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [newSearch, setNewSearch] = useState('');\n  const [filter, setFilter] = useState(false);\n  const [sucessMessage, setSucessMessage] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  const headerStyle = {\n    color: 'red',\n  };\n\n  useEffect(() => {\n    servicePerson.getAll().then((initialNotes) => {\n      setPersons(initialNotes);\n    });\n  }, []);\n\n  const contactsToShow = filter\n    ? persons.filter((person) =>\n        person.name.toLowerCase().includes(newSearch.toLowerCase())\n      )\n    : persons;\n\n  const handleSearch = (e) => {\n    e.preventDefault();\n    setFilter(true);\n  };\n\n  const handleDeletePerson = (id) => {\n    // const findPerson = persons.find((person) => person.id === id);\n    const findPerson = persons.find((person) => person.id === id);\n    const personName = findPerson.name;\n    console.log(personName);\n    if (window.confirm(`Delete ${personName}?`)) {\n      servicePerson\n        .deletePerson(id)\n        .then((returnedNote) => console.log(returnedNote))\n        .catch((error) => {\n          setErrorMessage(`This note was already removed from server`);\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 4000);\n        });\n      setPersons(persons.filter((person) => person.id !== id));\n    }\n    return;\n  };\n\n  const handleNewPerson = (e) => {\n    e.preventDefault();\n\n    const newPersonObject = {\n      name: newName,\n      number: newNumber,\n    };\n    const checkIfNameExists = persons.filter(\n      (person) => person.name.toLowerCase() === newName.toLowerCase()\n    );\n\n    if (checkIfNameExists.length > 0) {\n      console.log(checkIfNameExists);\n      if (\n        window.confirm(\n          `${newName} is already added to phonebook, replace the old number with a new one?`\n        )\n      ) {\n        const findPerson = checkIfNameExists[0];\n        const id = findPerson.id;\n        const newPersonNumber = { ...findPerson, number: newNumber };\n        servicePerson\n          .update(id, newPersonNumber)\n          .then((returnedNote) =>\n            setPersons(\n              persons.map((person) =>\n                person.id !== id ? person : returnedNote\n              )\n            )\n          )\n          .catch((error) => {\n            setErrorMessage(`Information has been removed from server`);\n            setTimeout(() => {\n              setErrorMessage(null);\n            }, 5000);\n          });\n      }\n    } else {\n      servicePerson\n        .create(newPersonObject)\n        .then((returnedNote) => {\n          setPersons(persons.concat(returnedNote));\n          setSucessMessage(`Added ${newName}`);\n          setTimeout(() => {\n            setSucessMessage(null);\n          }, 4000);\n          setNewName('');\n          setNewNumber('');\n        })\n        .catch((error) => {\n          setErrorMessage(`${error.response.data.error}`);\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 4000);\n        });\n    }\n  };\n\n  return (\n    <div>\n      <h2 style={headerStyle}>Phonebook</h2>\n      <Notification message={sucessMessage ? sucessMessage : errorMessage} />\n\n      <Filter\n        handleSearch={handleSearch}\n        newSearch={newSearch}\n        setNewSearch={setNewSearch}\n      />\n      <h2>add a new</h2>\n      <Form\n        handleNewPerson={handleNewPerson}\n        setNewName={(e) => setNewName(e.target.value)}\n        newName={newName}\n        newNumber={newNumber}\n        setNewNumber={(e) => setNewNumber(e.target.value)}\n      />\n      <h2>Numbers</h2>\n      <Persons\n        handleDeletePerson={handleDeletePerson}\n        contactsToShow={contactsToShow}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n\n  document.getElementById('root')\n);\n"],"sourceRoot":""}